(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[485],{49679:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>p});var r=a(95155),s=a(96941),l=a(12115),n=a(69018),i=a(23881),o=a(13568);let d=async(e,t)=>{let a=o.oR.loading("Deleting user...");try{var r;await (0,n.hG)(e),o.oR.success("User deleted successfully!",{id:a}),null==t||null==(r=t.current)||r.reload()}catch(e){o.oR.error("Delete failed.",{id:a}),console.error("Delete error:",e)}};var c=a(4076),u=a(57845);let p=()=>{let e=(0,l.useRef)(void 0),[t,a]=(0,l.useState)(!0),p=[{title:"User ID",dataIndex:"id",valueType:"text"},{title:"Username",dataIndex:"userName",copyable:!0},{title:"Nickname",dataIndex:"nickName"},{title:"Avatar",dataIndex:"avatarUrl",render:(e,t)=>t.avatarUrl?(0,r.jsx)(i.A,{src:t.avatarUrl,width:100,alt:"User avatar"}):null},{title:"Gender",dataIndex:"gender",valueType:"select",valueEnum:{0:{text:"Female",status:"Default"},1:{text:"Male",status:"Success"}},filters:[{text:"Female",value:0},{text:"Male",value:1}]},{title:"Phone Number",dataIndex:"phone"},{title:"Email",dataIndex:"email"},{title:"User Role",dataIndex:"userRole",valueType:"select",valueEnum:{0:{text:"Normal User",status:"Default"},1:{text:"Administrator",status:"Success"}}},{title:"Operate",valueType:"option",key:"option",render:(t,a,s,l)=>[(0,r.jsx)("a",{onClick:()=>{var e;null==l||null==(e=l.startEditable)||e.call(l,a.id)},children:"Edit"},"editable"),(0,r.jsx)("a",{onClick:()=>d(a.id,e),children:"Delete"},"delete")]}];return(0,r.jsxs)("div",{className:"max-w-7xl mx-auto p-4",children:[(0,r.jsx)(o.l$,{position:"top-center"}),(0,r.jsx)(u.Ay,{locale:c.A,children:(0,r.jsx)(s.A,{columns:p,actionRef:e,cardBordered:!0,loading:t,request:async e=>{let r=o.oR.loading("Loading data...");try{let s=await (0,n.x5)(e);return o.oR.success("Data loaded",{id:r}),t&&a(!1),{data:s.data,total:s.total,success:!0}}catch(e){return console.error("Failed to load users:",e),o.oR.error("Failed to load data",{id:r}),t&&a(!1),{data:[],total:0,success:!1}}},editable:{type:"multiple",onSave:async(t,a)=>{let r=o.oR.loading("Updating user...");try{var s;await (0,n.TK)(a),o.oR.success("User updated successfully!",{id:r}),null==(s=e.current)||s.reload()}catch(e){o.oR.error("Update failed.",{id:r}),console.error("Update error:",e)}},onDelete:async(t,a)=>{await d(a.id,e)}},columnsState:{persistenceKey:"pro-table-singe-demos",persistenceType:"localStorage",defaultValue:{option:{fixed:"right",disable:!0}},onChange(e){console.log("value: ",e)}},rowKey:"id",search:{labelWidth:"auto"},options:{setting:{listsHeight:400}},form:{syncToUrl:(e,t)=>"get"===t?{...e,created_at:[e.startTime,e.endTime]}:e},pagination:{pageSize:5,onChange:e=>console.log(e)},dateFormatter:"string",headerTitle:"Advanced Tables"})})]})}},67591:(e,t,a)=>{Promise.resolve().then(a.bind(a,49679))},69018:(e,t,a)=>{"use strict";a.d(t,{hG:()=>d,iD:()=>l,kz:()=>s,Zm:()=>n,x5:()=>o,CI:()=>i,TK:()=>c});let r=a(23464).A.create({baseURL:"https://usercenter-demo-bsc9fyazcubtgka0.australiaeast-01.azurewebsites.net/api",headers:{"Content-Type":"application/json"}}),s=async e=>(await r.post("/Auth/register",e)).data;async function l(e){return(await r.post("/Auth/login",e,{withCredentials:!0})).data}async function n(e){return(await r.post("/User/saveChanges",e,{withCredentials:!0})).data}async function i(){return(await r.post("/Auth/signOut",null,{withCredentials:!0})).data}async function o(e){try{let t=await r.get("/User/list",{params:e,withCredentials:!0});return{data:t.data.data,total:t.data.total,success:!0}}catch(r){var t,a,s,l,n;let e=null==(t=r.response)?void 0:t.status;if(401===e)throw Error("Unauthorized: The user is not logged in or the identity is invalid");if(403===e)throw Error((null==(s=r.response)||null==(a=s.data)?void 0:a.message)||(null==(n=r.response)||null==(l=n.data)?void 0:l.data)||"Forbidden: Insufficient permissions");throw console.error("Failed to obtain user list",r),Error("Unexpected error occurred while fetching user list")}}async function d(e){return await r.delete("/User/delete/".concat(e))}async function c(e){return await r.put("/User/update/".concat(e.id),e)}}},e=>{var t=t=>e(e.s=t);e.O(0,[464,568,48,441,684,358],()=>t(67591)),_N_E=e.O()}]);